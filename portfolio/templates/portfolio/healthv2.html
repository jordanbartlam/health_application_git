{% extends "base_generic.html" %}

{% block content %}

<h1 class="text-center" style="padding:5%;">Health Dashboard</h1>

<table class="table table-borderless table-hover">
    <tr>
        <thead class="thead-dark">
            <tr>
                <th scope="col" style="text-align:center;">Metric</th>
                <th scope="col" style="text-align:center;">Analysis</th>
                <th scope="col" style="text-align:center;">Explanation</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td style="text-align:center;">Longevity</td>
                <td style="text-align:center;">

                    <div style="margin-left:30%;padding:5%;">
                        {% load portfolio_extras %}
                        <div style="width:{{longevity_radius|add:100}}px;height:{{longevity_radius|add:100}}px;border-radius:50%;background:#5ea303;position:relative;">
                            <div style="top:0%;left:{{longevity_radius|div:4}}%;width:100px;height:100px;border-radius:50%;background:#c7c7c7;position:relative;text-align:center;line-height:100px;border:2px solid black;">{{longevity_expected}}</div>
                        </div>
                    </div>

                </td>
                <td style="text-align:center;">Explanation</td>
            </tr>
            <tr>
                <td style="text-align:center;">Mobility</td>
                <td style="text-align:center;">

                    <div class="container my-auto" style="margin-left:5%;height:100px;">
                        <div class="row">
                            <div class="col-md-2 text-center">
                                <span style="display:inline-block;width:50%;height:100%;border:solid black;background-color:{% if mobility == 1 %}red{% elif mobility == 2 %}#fc5a03{% elif mobility == 3 %}orange{% elif mobility == 4 %}#fcbe03{% elif mobility == 5 %}yellow{% elif mobility == 6 %}#d2fc03{% elif mobility == 7 %}green{% elif mobility == 8 %}#1b6106{% elif mobility == 9 %}blue{% elif mobility == 10 %}#320f94{% elif mobility == 11 %}#885fd9{% else %}#d580ff{% endif %};"></span>
                            </div>
                            <div class="col-md-5 text-center my-auto">
                                <div class="row">
                                    <div class="col-md-1">
                                        1
                                    </div>
                                    <div class="col-md-8" style="border:1px black solid;background-image:linear-gradient(to right,red,orange,yellow,green,blue,indigo,violet);">

                                    </div>
                                    <div class="col-md-1">
                                        12
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>



                </td>
                <td style="text-align:center;">Explanation</td>
            </tr>
            <tr>
                <td style="text-align:center;">Wellbeing</td>
                <td style="text-align:center;"></td>
                <td style="text-align:center;"></td>
            </tr>
        </tbody>
    </tr>
</table>





<!--<div class="container" style="border:black solid; padding:5%;background-color:#fffdc7;">-->
<!--    <div class="row justify-content-between">-->
<!--        <div class="col-md-3 my-auto">-->
<!--            <h3><strong>Longevity</strong></h3>-->
<!--        </div>-->
<!--        <div class="col-md-8">-->
<!--            {% load portfolio_extras %}-->
<!--            <div style="width:{{longevity_radius|add:100}}px;height:{{longevity_radius|add:100}}px;border-radius:50%;background:#5ea303;position:relative;">-->
<!--                <div style="top:0%;left:{{longevity_radius|div:4}}%;width:100px;height:100px;border-radius:50%;background:#c7c7c7;position:relative;text-align:center;line-height:100px;border:2px solid black;">{{longevity_expected}}</div>-->
<!--            </div>-->
<!--        </div>-->
<!--    </div>-->
<!--</div>-->


<!--<br>-->
<!--<div class="container" style="margin-top:3%;border:black solid;padding:5%;background-color:#fffdc7;">-->
<!--    <div class="row">-->
<!--        <div class="col-md-3">-->
<!--            <h3><strong>Mobility</strong></h3>-->
<!--        </div>-->
<!--        <div class="col-md-2 text-center">-->
<!--            <span style="display:inline-block;width:50%;height:100%;border:solid black;background-color:{% if mobility == 1 %}red{% elif mobility == 2 %}#fc5a03{% elif mobility == 3 %}orange{% elif mobility == 4 %}#fcbe03{% elif mobility == 5 %}yellow{% elif mobility == 6 %}#d2fc03{% elif mobility == 7 %}green{% elif mobility == 8 %}#1b6106{% elif mobility == 9 %}blue{% elif mobility == 10 %}#320f94{% elif mobility == 11 %}#885fd9{% else %}#d580ff{% endif %};"></span>-->
<!--        </div>-->
<!--        <div class="col-md-7 text-center my-auto">-->
<!--            <div class="row">-->
<!--                <div class="col-md-1">-->
<!--                    1-->
<!--                </div>-->
<!--                <div class="col-md-9" style="border:1px black solid;background-image:linear-gradient(to right,red,orange,yellow,green,blue,indigo,violet);">-->

<!--                </div>-->
<!--                <div class="col-md-1">-->
<!--                    12-->
<!--                </div>-->
<!--            </div>-->
<!--        </div>-->
<!--    </div>-->
<!--</div>-->
<!--<br>-->
<!--<div class="container" style="margin-top:3%;margin-bottom:3%;border:black solid;padding:5%;background-color:#fffdc7;">-->
<!--    <div class="row justify-content-between">-->
<!--        <div class="col-md-3">-->
<!--            <h3><strong>Wellbeing</strong></h3>-->
<!--        </div>-->
<!--        <div class="col-md-8 my-auto">-->
<!--            <div class="progress" style="border:1px solid black;">-->
<!--                <div class="progress-bar" role="progressbar" style="width:{{wellbeing}}%;background-color:blue;" aria-valuenow="{{wellbeing}}" aria-valuemin="0" aria-valuemax="100">{{wellbeing}}%</div>-->
<!--            </div>-->
<!--        </div>-->
<!--    </div>-->
<!--</div>-->

<div>
    <canvas id="barChart" width="400" height="400"></canvas>
</div>

<div>
    <canvas id="pieChart" width="400" height="400"></canvas>
</div>


<script>

var ctx = document.getElementById('barChart').getContext('2d');
var myChart = new Chart(ctx, {
    type: 'bar',
    data: {
        labels: {{weeks|safe}},
        datasets: [{
            label: 'Monthly hours of exercise',
            data: {{weekly_exercise_time|safe}},
            backgroundColor: "rgba(14,72,100,1)",
            borderWidth: 1
        }]
    },
    options: {
        scales: {
            yAxes: [{
                ticks: {
                    beginAtZero: true
                }
            }]
        },
        legend: {display: false}
    }
});

</script>

<script>

function getRandomColor() {
            var letters = '0123456789ABCDEF'.split('');
            var color = '#';
            for (var i = 0; i < 6; i++ ) {
                color += letters[Math.floor(Math.random() * 16)];
            }
            return color;
}

var colors = [];
var num_labels = {{ activities_performed|safe }}
for(let i=0;i<num_labels.length;i++) {
    colors.push(getRandomColor());
}

var ctx_2 = document.getElementById('pieChart').getContext('2d');
var chart_2 = new Chart(ctx_2, {
    // The type of chart we want to create
    type: 'pie',

    // The data for our dataset
    data: {
        labels: {{ activities_performed|safe }},
        datasets: [{
            backgroundColor: colors.slice(0,-1),
            data: {{ time_performed|safe }}
        }]
    },

    // Configuration options go here
    options: {
        legend: { display: true }
    }
});

</script>

{% endblock %}